{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block title %}Dashboard | Debuttend CMS{% endblock %}

{% block content %}
<section class="container mx-auto px-4 py-16">
  <header class="mb-8 flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <h1 class="text-3xl font-bold">{{ page.title }}</h1>
      <p class="text-gray-600">{{ page.subtitle }}</p>
    </div>
    <div class="flex gap-2">
      <a href="/cms/pages/{{ page.id }}/" class="rounded bg-blue-600 px-4 py-2 text-white">Edit Dashboard</a>
      <a href="/search/" class="rounded border border-blue-600 px-4 py-2 text-blue-600">Global Search</a>
    </div>
  </header>
  <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
    {% for block in page.layout %}
      <div class="rounded border border-gray-200 bg-white p-6 shadow" style="grid-column: span {{ block.value.column_span }} / span {{ block.value.column_span }};">
        <h2 class="text-xl font-semibold">{{ block.value.widget.title }}</h2>
        <p class="mt-2 text-gray-600">{{ block.value.widget.description }}</p>
        <pre class="mt-4 overflow-x-auto rounded bg-gray-900 p-4 text-sm text-green-300">{{ block.value.widget.configuration|default:{}|pprint }}</pre>
      </div>
    {% empty %}
      <p class="text-gray-500">Configure widgets from the Wagtail admin to populate your dashboard.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
